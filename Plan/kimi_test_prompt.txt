Έγγραφο Απαιτήσεων Έργου – Σκελετός  
Web App: «Διαδραστικός Χάρτης Δρομολόγησης OpenStreetMap με Υψομετρικό Προφίλ»

────────────────────────────────────────
1. Σκοπός Έργου (μία πρόταση)
Να δημιουργηθεί μια single-page web εφαρμογή που επιτρέπει στους χρήστες να τοποθετούν σημεία (pins) σε χάρτη OpenStreetMap, να υπολογίζει τη βέλτιστη οδική διαδρομή μέσα από τα σημεία με τη σειρά και να παρουσιάζει live υψομετρικό προφίλ με έγχρωμη σήμανση κλίσης >5°.

────────────────────────────────────────
2. Βασικές Λειτουργικές Απαιτήσεις (CFRs)

CFR-1  Αρχική Σελίδα  
 • Πλήρους πλάτους δοχείο χάρτη (Leaflet.js με πλακίδια OpenStreetMap).  
 • Χωρίς σύνδεση, χωρίς βάση δεδομένων.

CFR-2  Δημιουργία Σημείων (Pins)  
 • Αριστερό κλικ στο χάρτη → αριθμημένο pin (1,2,3…) με γεωγραφικά.  
 • Το pin-1 είναι υποχρεωτικό· επιπλέον προαιρετικά.  
 • Δεξί κλικ σε pin → διαγραφή.  
 • Δυνατότητα drag-and-drop για επανατοποθέτηση.

CFR-3  Υπολογισμός Διαδρομής  
 • Όταν υπάρχουν ≥2 pins, αυτόματη κλήση δρομολόγησης.  
 • Χρήση δημόσιου OSRM server μέσω HTTPS GET  
   …/route/v1/driving/{lon1},{lat1};{lon2},{lat2};…?overview=full&geometries=geojson&steps=true  
 • Σχεδίαση πολυγραμμής στο χάρτη μπλε χρώμα (#1976d2).  
 • Εμφάνιση συνολικής απόστασης (χλμ) και εκτιμώμενου χρόνου.

CFR-4  Υψομετρικό Προφίλ  
 • Κάτω από τον χάρτη, canvas 100 % πλάτους (Chart.js).  
 • Άξονας Χ = απόσταση (χλμ), άξονας Υ = υψόμετρο (m).  
 • Ανάκτηση υψομέτρων για κάθε σημείο διαδρομής μέσω OpenTopoData.org (ή Mapbox Terrain-RGB).  
 • Batch requests ≤100 σημεία για σεβασμό ορίων.  
 • Χρωματικός κώδικας:  
  • ≤5° → γραμμή #1976d2  
  • >5° → γραμμή #ff5252  
 • Tooltip κατά το πέρασμα του ποντικιού: απόσταση, υψόμετρο, κλίση (°).

CFR-5  Live & Stateless  
 • Όλη η κατάσταση αποθηκεύεται στη μνήμη του browser (αντικείμενο JS).  
 • Χωρίς cookies, χωρίς localStorage, χωρίς backend, χωρίς βάση δεδομένων.  
 • Ανανέωση σελίδας → επαναφορά στο κενό.

CFR-6  Responsive & Single-Page  
 • Λειτουργία σε desktop 1080p και tablets ≥768 px (δεν απαιτείται βελτιστοποίηση για κινητά).  
 • Ένα μόνο αρχείο HTML + inline CSS + ένα bundled JS.  
 • Χωρίς routing libraries ή SPA frameworks πλην Leaflet/Chart.

────────────────────────────────────────
3. Μη-Λειτουργικές Απαιτήσεις (NFRs)

NFR-1  Απόδοση  
 • Φόρτωση αρχικού χάρτη ≤2 s σε γραμμή 20 Mbps.  
 • Ανάκτηση υψομέτρων ≤3 s για διαδρομή 50 km.

NFR-2  Διαθεσιμότητα  
 • Πρέπει να τρέχει εξ ολοκλήρου από https://yourdomain.com/index.html  
 • Όλες οι εξωτερικές κλήσεις μέσω HTTPS.

NFR-3  Υποστήριξη Browsers  
 • Chrome 110+, Edge 110+, Firefox 110+.

NFR-4  Προσβασιμότητα  
 • Χειρισμός χάρτη με πληκτρολόγιο (σειρά Tab).  
 • Alt-text για κάθε pin «Pin N στο lat,lng».

────────────────────────────────────────
4. Εξωτερικά APIs & Libraries

Πλακίδια OpenStreetMap:  
 https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png  
OSRM demo server:  
 https://router.project-osrm.org  
OpenTopoData SRTM 30m:  
 https://api.opentopodata.org/v1/srtm30m?locations={lat},{lon}|…

Libraries (μόνο CDN):  
 Leaflet 1.9.4  
 Chart.js 4.4.0  
 Axios ή native fetch (ES6)

────────────────────────────────────────
5. Διάταξη UI & Styling

Γραμμή κεφαλίδας (60 px)  
 Τίτλος «OSM Route Planner» αριστερά.  
Δοχείο χάρτη  
 Καταλαμβάνει το υπόλοιπο ύψος viewport μείον 220 px.  
Δοχείο γραφήματος υψομέτρου  
 Ύψος 220 px, πλήρες πλάτος, φόντο ανοιχτό γκρι (#f5f5f5).  
Πλευρική λίστα pins (προαιρετικό toggle)  
 Προβάλλει λίστα pins με lat/lon· εξαφανίζεται <768 px.

Χρωματική παλέτα  
 Κύριο μπλε #1976d2  
 Κόκκινο προειδοποίησης #ff5252  
 Κείμενο #212121  
 Φόντο #ffffff

────────────────────────────────────────
6. Ροή Δεδομένων (ψευδοκώδικας)

onMapClick(latlng) →  
 push {id, lat, lng} στο pins[] →  
 renderMarkers() →  
 αν pins.length ≥ 2 → fetchRoute() → drawPolyline() → fetchElevations() → drawChart()

fetchRoute()  
 GET OSRM → decode polyline → routeCoords[]

fetchElevations()  
 chunk routeCoords κάθε 100 σημεία → παράλληλα GET OpenTopoData → merge → elevations[]

computeGrade()  
 για κάθε ζεύγος (p1, p2)  
  grade = atan2(p2.ele-p1.ele, distance) * 180/π  
  color = grade > 5 ? red : blue

drawChart()  
 Chart.js line chart με χρωματιστά τμήματα.

────────────────────────────────────────
7. Δομή Παράδοσης (για LLM)

Δέντρο αρχείων (στατικό site σε έναν φάκελο):  
index.html  
styles.css (inline στο <style> αν γίνεται)  
app.js (ES6 module)  
README.md (προαιρετικό – εξηγεί χρήση)

────────────────────────────────────────
8. Κριτήρια Αποδοχής (για δοκιμή LLM)

AC-1  Άνοιγμα σελίδας → χάρτης φορτωμένος κεντραρισμένος 38.0°, 23.7° (Ελλάδα).  
AC-2  Τρία κλικ → τρία αριθμημένα pins.  
AC-3  Μετά το 3ο κλικ → εμφανίζεται μπλε γραμμή δρομολόγησης.  
AC-4  Εμφανίζεται υψομετρικό γράφημα· κόκκινα τμήματα όπου κλίση>5°.  
AC-5  Διαγραφή μεσαίου pin → διαδρομή & γράφημα ενημερώνονται άμεσα.  
AC-6  Ανανέωση → κενός χάρτης (stateless).  
AC-7  Καμία σφάλμα στο console.

────────────────────────────────────────
9. Extra (προαιρετικά, αν το LLM έχει χρόνο)

• Κουμπί εξαγωγής GPX (client-side blob).  
• Κοινή χρήση link μέσω query string που κωδικοποιεί όλα τα pins.  
• Toggle σκούρου θέματος.  
• Εναλλαγή μονάδων km ↔ miles.

────────────────────────────────────────
10. Μία-πρόταση Prompt για LLM

«Δημιούργησε μια πλήρη single-page web εφαρμογή που πληροί τα CFR-1..CFR-6 και περνά τα AC-1..AC-7, χρησιμοποιώντας μόνο τα CDN libraries της ενότητας 4 και τα APIs της ενότητας 4· χωρίς build tools, χωρίς server, χωρίς βάση δεδομένων.»